- type: entity
  id: longrangemetaldetector
  parent: BaseItem
  name: Металлодетектор дальнего действия
  description: Аномальный ручной металлодетектор, был узконаправленно модифицирован для поиска тайников.
  suffix: ST
  components:
  - type: Sprite
    sprite: _Stalker/Objects/Devices/longrangemetaldetector.rsi
    layers:
      - state: icon
      - state: screen
        shader: unshaded
        visible: false
        map: ["enum.ToggleableVisuals.Layer"]
  - type: Appearance
  - type: GenericVisualizer
    visuals:
      enum.ToggleableVisuals.Enabled:
        enum.ToggleableVisuals.Layer:
          True: { visible: true }
          False: { visible: false }
  - type: ItemToggle
  - type: ProximityBeeper
  - type: ProximityDetector
    range: 30
    components:
    - type: Rangedetector # reacts to AI eye, intentional
  - type: Beeper
    isMuted: true
    minBeepInterval: 0.15
    maxBeepInterval: 2
    beepSound:
      path: "/Audio/Items/locator_beep.ogg"
      params:
        maxDistance: 1
        volume: -8
  - type: Craftable

- type: entity
  parent: BaseItem
  id: longrangemetaldetectorBox
  name: Коробка из тайника
  description: Ящик из тайника
  components:
    - type: Item
      size: Large
      shape:
        - 0,0,6,6
    - type: Sprite
      sprite: _Stalker/Structures/Furniture/carton_box.rsi
      state: kb2
    - type: Icon
      sprite: _Stalker/Structures/Furniture/carton_box.rsi
      state: kb2
    - type: SpawnItemsOnUse
      items:
        - id: MedkitAI2
          prob: 0.2
        - id: MedkitMilitary
          prob: 0.1
        - id: WristwatchGold
          prob: 0.005
        - id: STWeaponShotgunAnomalyToz34
          prob: 0.01
        - id: STWeaponSMGVZ61
          prob: 0.015
        - id: ClothingNeckBling
          prob: 0.02
        - id: STWeaponSMGMP40 #EN
          prob: 0.02
        - id: STWeaponSMGMP40ruust #EN
          prob: 0.01
        - id: WeaponStalkerPistolTec9 #EN
          prob: 0.02
        - id: SilverRingGem
          prob: 0.07
        - id: Roubles1000
          prob: 0.5
        - id: ZoneArtifactBattery
          prob: 0.1
        - id: ZoneArtifactKolobok #EN
          prob: 0.01
        - id: Roubles2000
          prob: 0.2
        - id: Roubles5000
          prob: 0.05
        - id: DG05SmokeGrenade
          prob: 0.2
        - id: RGD5Grenade
          prob: 0.1
        - id: ClothingBeltSmuggler #EN
          prob: 0.02
      sound:
        path: /Audio/Effects/unwrap.ogg

- type: lightCraftingRecipe
  id: Tainik
  results:
  - longrangemetaldetectorBox
  steps:
    firstIngredient: longrangemetaldetectorCrate
    secondIngredient: AAAAStalkerLopata
    keepSecond: true
    exactSecond: false
    time: 20

- type: lightCraftingRecipe
  id: Tainikgrass
  results:
  - longrangemetaldetectorBox
  steps:
    firstIngredient: longrangemetaldetectorCrategrass
    secondIngredient: AAAAStalkerLopata
    keepSecond: true
    exactSecond: false
    time: 20

- type: entity
  id: longrangemetaldetectorCrate
  parent: BaseStructure
  name: Тайник (Невидимый)
  description: Закопанный Тайник
  components:
  - type: Transform
    anchored: true
  - type: Clickable
  - type: Sprite
    noRot: true
    sprite: _Stalker/Objects/Decoration/invisible.rsi
    layers:
      - state: invisible
  - type: Craftable
  - type: Rangedetector
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.35
        density: 50
        mask:
        - SubfloorMask
  - type: Stealth
  - type: Tag
    tags:
      - HideContextMenu

- type: entity
  name: тайник спавнер невидимый (25 %)
  id: longrangemetaldetectorCrateSpawner25
  parent: MarkerBase
  components:
    - type: Sprite
      layers:
        - state: green
        - sprite: _Stalker/Structures/Furniture/carton_box.rsi
          state: kb1
    - type: RandomSpawner
      prototypes:
        - longrangemetaldetectorCrate
      chance: 0.25

- type: entity
  name: тайник спавнер невидимый (10 %)
  id: longrangemetaldetectorCrateSpawner
  parent: MarkerBase
  components:
    - type: Sprite
      layers:
        - state: green
        - sprite: _Stalker/Structures/Furniture/carton_box.rsi
          state: kb1
    - type: RandomSpawner
      prototypes:
        - longrangemetaldetectorCrate
      chance: 0.1

- type: entity
  name: тайник спавнер невидимый (5 %)
  id: longrangemetaldetectorCrateSpawner05
  parent: MarkerBase
  components:
    - type: Sprite
      layers:
        - state: green
        - sprite: _Stalker/Structures/Furniture/carton_box.rsi
          state: kb1
    - type: RandomSpawner
      prototypes:
        - longrangemetaldetectorCrate
      chance: 0.05

- type: entity
  name: тайник спавнер невидимый (1 %)
  id: longrangemetaldetectorCrateSpawner01
  parent: MarkerBase
  components:
    - type: Sprite
      layers:
        - state: green
        - sprite: _Stalker/Structures/Furniture/carton_box.rsi
          state: kb1
    - type: RandomSpawner
      prototypes:
        - longrangemetaldetectorCrate
      chance: 0.01

- type: entity
  id: longrangemetaldetectorCrategrass
  parent: BaseStructure
  name: Тайник (спрайт травы)
  description: Закопанный Тайник, Трава
  components:
  - type: Transform
    anchored: true
  - type: Clickable
  - type: Sprite
    sprite: _Stalker/Decals/greengraseONEST.rsi
    layers:
      - state: grass
  - type: SyncSprite
  - type: RequiresTile
  - type: Craftable
  - type: Rangedetector
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.35
        density: 50
        mask:
        - SubfloorMask
  - type: Tag
    tags:
      - HideContextMenu

- type: entity
  name: тайник спавнер трава (10 %)
  id: longrangemetaldetectorCrategrassSpawner
  parent: MarkerBase
  components:
    - type: Sprite
      layers:
        - state: green
        - sprite: _Stalker/Structures/Furniture/carton_box.rsi
          state: kb1
    - type: RandomSpawner
      prototypes:
        - longrangemetaldetectorCrategrass
      chance: 0.1

- type: entity
  name: тайник спавнер трава (5 %)
  id: longrangemetaldetectorCrategrassSpawner05
  parent: MarkerBase
  components:
    - type: Sprite
      layers:
        - state: green
        - sprite: _Stalker/Structures/Furniture/carton_box.rsi
          state: kb1
    - type: RandomSpawner
      prototypes:
        - longrangemetaldetectorCrategrass
      chance: 0.05

- type: entity
  name: тайник спавнер трава (1 %)
  id: longrangemetaldetectorCrategrassSpawner01
  parent: MarkerBase
  components:
    - type: Sprite
      layers:
        - state: green
        - sprite: _Stalker/Structures/Furniture/carton_box.rsi
          state: kb1
    - type: RandomSpawner
      prototypes:
        - longrangemetaldetectorCrategrass
      chance: 0.01
